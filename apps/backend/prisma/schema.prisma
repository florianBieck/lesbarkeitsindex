generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}

generator prismabox {
  provider                    = "prismabox"
  typeboxImportDependencyName = "elysia"
  typeboxImportVariableName   = "t"
  inputModel                  = true
  output                      = "../generated/prismabox"
}

model Config {
  id                                                   String   @id @default(cuid())
  createdAt                                            DateTime @default(now())
  parameterCountWords                                  Decimal // Anzahl Wörter
  parameterCountPhrases                                Decimal // Anzahl Sätze
  parameterCountMultipleWords                          Decimal // Anzahl an mehrfach vorkommenden Wörtern
  parameterCountWordsWithComplexSyllables              Decimal // Silbenkomplexität (≥3 Vokalgruppen)
  parameterCountWordsWithConsonantClusters             Decimal // Konsonantencluster (Str-, Spr-, -nkt, -cht)
  parameterCountWordsWithMultiMemberedGraphemes        Decimal // mehrgliedrige Grapheme (sch, ch, ck, ng, etc.)
  parameterCountWordsWithRareGraphemes                 Decimal // seltene Grapheme (ä, ö, ü, ß, c, q, x, y)
  parameterAverageWordLength                           Decimal // Durchschnittliche Wortlänge
  parameterAveragePhraseLength                         Decimal // Durchschnittliche Satzlänge
  parameterAverageSyllablesPerWord                     Decimal // Durchschnittliche Anzahl an Silben pro Wort
  parameterAverageSyllablesPerPhrase                   Decimal // Durchschnittliche Anzahl an Silben pro Satz
  parameterProportionOfLongWords                       Decimal // Anteil an langen Wörtern
  parameterLix                                         Decimal // LIX
  parameterProportionOfWordsWithComplexSyllables       Decimal // Anteil an Wörtern mit komplexen Silben (≥3 Vokalgruppen)
  parameterProportionOfWordsWithConsonantClusters      Decimal // Anteil an Wörter mit Konsonantencluster (Str-, Spr-, -nkt, -cht)
  parameterProportionOfWordsWithMultiMemberedGraphemes Decimal // Anteil an Wörter mit mehrgliedrigen Graphemen (sch, ch, ck, ng, etc.)
  parameterProportionOfWordsWithRareGraphemes          Decimal // Anteil an Wörtern mit seltene Graphemen (ä, ö, ü, ß, c, q, x, y)
  results                                              Result[]
}

model Result {
  id                                          String   @id @default(cuid())
  createdAt                                   DateTime @default(now())
  countWords                                  Decimal // Anzahl Wörter
  countPhrases                                Decimal // Anzahl Sätze
  countSyllables                              Decimal // Anzahl Silben
  countMultipleWords                          Decimal // Anzahl an mehrfach vorkommenden Wörtern
  countWordsWithComplexSyllables              Decimal // Anzahl Wörter mit komplexen Silben (≥3 Vokalgruppen)
  countWordsWithConsonantClusters             Decimal // Anzahl Wörter mit Konsonantencluster (Str-, Spr-, -nkt, -cht)
  countWordsWithMultiMemberedGraphemes        Decimal // Anzahl Wörter mit mehrgliedrigen Graphemen (sch, ch, ck, ng, etc.)
  countWordsWithRareGraphemes                 Decimal // Anzahl Wörter mit seltenen Graphemen (ä, ö, ü, ß, c, q, x, y)
  countWordsWithOneSyllable                   Decimal // Anzahl Wörter mit einer Silbe
  countWordsWithTwoSyllable                   Decimal // Anzahl Wörter mit zwei Silben
  countWordsWithThreeSyllable                 Decimal // Anzahl Wörter mit drei Silben
  countWordsWithFourSyllable                  Decimal // Anzahl Wörter mit vier Silben
  countWordsWithFiveSyllable                  Decimal // Anzahl Wörter mit fünf Silben
  averageWordLength                           Decimal // Durchschnittliche Wortlänge
  averagePhraseLength                         Decimal // Durchschnittliche Satzlänge
  averageSyllablesPerWord                     Decimal // Durchschnittliche Anzahl an Silben pro Wort
  averageSyllablesPerPhrase                   Decimal // Durchschnittliche Anzahl an Silben pro Satz
  proportionOfLongWords                       Decimal // Anteil an langen Wörtern
  proportionOfWordsWithComplexSyllables       Decimal // Anteil an Wörtern mit komplexen Silben (≥3 Vokalgruppen)
  proportionOfWordsWithConsonantClusters      Decimal // Anteil an Wörtern mit Konsonantencluster (Str-, Spr-, -nkt, -cht)
  proportionOfWordsWithMultiMemberedGraphemes Decimal // Anteil an Wörtern mit mehrgliedrigen Graphemen (sch, ch, ck, ng, etc.)
  proportionOfWordsWithRareGraphemes          Decimal // Anteil an Wörtern mit seltene Graphemen (ä, ö, ü, ß, c, q, x, y)
  lix                                         Decimal // Lesbarkeitsindex
  ratte                                       Decimal // RATTE Wert
  ratteLevel                                  Decimal // RATTE Level
  gsmog                                       Decimal // gSMOG
  wst4                                        Decimal // WST4
  fleschKincaid                               Decimal // FLESCH.Kincaid
  score                                       Decimal // Ergebnis LÜ-LIX
  scoreLevel                                  Decimal // Ergebnis LÜ-LIX Level
  text                                        String
  words                                       String[]
  wordsWithOneSyllable                        String[]
  wordsWithTwoSyllables                       String[]
  wordsWithThreeSyllables                     String[]
  wordsWithFourSyllables                      String[]
  wordsWithFiveSyllables                      String[]
  phrases                                     String[]
  syllables                                   String[]
  hashText                                    String
  config                                      Config   @relation(fields: [configId], references: [id])
  configId                                    String
}

model User {
  id            String    @id
  name          String
  email         String
  emailVerified Boolean   @default(false)
  image         String?
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @default(now()) @updatedAt
  role          String?
  banned        Boolean?  @default(false)
  banReason     String?
  banExpires    DateTime?
  sessions      Session[]
  accounts      Account[]

  @@unique([email])
  @@map("user")
}

model Session {
  id             String   @id
  expiresAt      DateTime
  token          String
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
  ipAddress      String?
  userAgent      String?
  userId         String
  user           User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  impersonatedBy String?

  @@unique([token])
  @@map("session")
}

model Account {
  id                    String    @id
  accountId             String
  providerId            String
  userId                String
  user                  User      @relation(fields: [userId], references: [id], onDelete: Cascade)
  accessToken           String?
  refreshToken          String?
  idToken               String?
  accessTokenExpiresAt  DateTime?
  refreshTokenExpiresAt DateTime?
  scope                 String?
  password              String?
  createdAt             DateTime  @default(now())
  updatedAt             DateTime  @updatedAt

  @@map("account")
}

model Verification {
  id         String   @id
  identifier String
  value      String
  expiresAt  DateTime
  createdAt  DateTime @default(now())
  updatedAt  DateTime @default(now()) @updatedAt

  @@map("verification")
}
